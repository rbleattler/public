image:
  repository: docker.io/itzg/mc-router
  pullPolicy: IfNotPresent
  tag: 1.39.1@sha256:be109433f1a67a6d925d93842018ae4d9dcb37f9df5ef3b246925343782233ab
service:
  main:
    ports:
      main:
        port: 25565
  api:
    enabled: true
    ports:
      api:
        enabled: true
        port: 25564

# manual option
mcrouter:
  # vanilla:25565
  default: ""
  mappings: []
    # - vanilla:25565
    # - forge:25565

workload:
  main:
    podSpec:
      containers:
        main:
          probes:
            liveness:
              port: "{{ .Values.service.api.ports.api.port }}"
              path: /routes
              httpHeaders:
                Accept: application/json
            readiness:
              port: "{{ .Values.service.api.ports.api.port }}"
              path: /routes
              httpHeaders:
                Accept: application/json
            startup:
              port: "{{ .Values.service.api.ports.api.port }}"
              path: /routes
              httpHeaders:
                Accept: application/json
          env:
            API_BINDING: ":{{ .Values.service.api.ports.api.port }}"
            PORT: "{{ .Values.service.main.ports.main.port }}"
            # enabled for auto discovery to work
            IN_KUBE_CLUSTER: true
            # leave blank for all namespaces
            # KUBE_NAMESPACE: ""
            DEFAULT: "{{ .Values.mcrouter.default }}"
            MAPPING: '{{ join "," .Values.mcrouter.mappings }}'

rbac:
  main:
    enabled: true
    primary: true
    clusterWide: true
    rules:
      - apiGroups: [""]
        resources:
          - "services"
        verbs:
          - "list"
          - "watch"

serviceAccount:
  main:
    enabled: true
    primary: true

podOptions:
  automountServiceAccountToken: true
